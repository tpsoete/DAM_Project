<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="static/css/templatemo-style.css">
</head>
<body class = "back">
    <div class = "login">
        <img src = "static/img/logo.png">
        <form action="" method="get">
            <div><input id="username" type="text" class="form_input" placeholder="账号"/></div>
            <div><input id="password" type="password" class="form_input" placeholder="密码"/></div>
            <div><button id="login-button" class = "login-button">登录</button></div>
            <a id="login-success" href = "/homepage" hidden></a>
            <div class="demo_line_05">———————<span>或</span>———————</div>
            <div class="link_register"><nobr>没有账户？</nobr>
                <a href = "/register">注册</a>
            </div>
        </form>
    </div>

    <script src="static/js/vendor/jquery-1.11.2.min.js"></script>

    <!-- 登录操作相关 -->
    <script>
        $(function(){
            $("#login-button").click(function(){
                var data = JSON.stringify({
                    username : $("#username").val(),
                    password : $("#password").val()
                })

                $.ajax({
                    data: data,
                    dataType: "text",
                    type: "POST",
                    success: function(result) {
                        if(result == "1") { 
                            $("#login-success")[0].click()
                        }
                        else {
                            alert(result)
                        }
                    }
                })
            })
        })
    </script>
</body>
</html>